using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.Tilemaps;

public class PlantGrowth : MonoBehaviour
{
    public Tilemap tilemap;
    public Tile plantTile;
    public Tile grownPlantTile;
    public Tile hole;
    public float growthTime = 10.0f;

    void Update()
    {
        
        Vector3 mousePosition = Camera.main.ScreenToWorldPoint(Input.mousePosition);
        Vector3Int cellPosition = tilemap.WorldToCell(mousePosition);

        TileBase tilemapB = tilemap.GetTile(cellPosition);

        if (tilemapB == hole)
        {
            //Debug.Log("dirt ok");
            if (Input.GetMouseButtonDown(0))
            {
                //Debug.Log("plant");
                tilemap.SetTile(cellPosition, plantTile);
                StartCoroutine(GrowPlant(cellPosition));
            }
           
        }
    }

    IEnumerator GrowPlant(Vector3Int cellPosition)
    {
        growthTime = 10.0f;
        yield return new WaitForSeconds(growthTime);
        //Debug.Log(growthTime);
        tilemap.SetTile(cellPosition, grownPlantTile);
        //Debug.Log("new plant");
    }

    public void ReduceGrowthTime(){
        growthTime -= 5.0f;
    }
}
